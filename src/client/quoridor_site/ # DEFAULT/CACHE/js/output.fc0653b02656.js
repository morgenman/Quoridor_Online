(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}
function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}
var TILESMAP=['111 111','1 1 1 1','1101011','  1 1  ','1101011','1 1 1 1','111 111'];var Between=Phaser.Math.Between;var Demo=function(_Phaser$Scene){_inherits(Demo,_Phaser$Scene);function Demo(){_classCallCheck(this,Demo);return _possibleConstructorReturn(this,(Demo.__proto__||Object.getPrototypeOf(Demo)).call(this,{key:'examples'}));}
_createClass(Demo,[{key:'preload',value:function preload(){}},{key:'create',value:function create(){var board=new Board(this,TILESMAP);var chessA=new ChessA(board,{x:0,y:0});var movingPointsTxt=this.add.text(10,10,'');this.input.on('pointerdown',function(pointer){var movingPoints=Between(1,6);movingPointsTxt.setText(movingPoints);chessA.moveForward(movingPoints);});this.add.text(0,580,'Click to move forward.');}}]);return Demo;}(Phaser.Scene);var COLORMAP=[0x087f23,0x4caf50];var Board=function(_RexPlugins$Board$Boa){_inherits(Board,_RexPlugins$Board$Boa);function Board(scene,tilesMap){_classCallCheck(this,Board);var tiles=createTileMap(TILESMAP);var config={grid:getQuadGrid(scene),width:tiles[0].length,height:tiles.length};var _this2=_possibleConstructorReturn(this,(Board.__proto__||Object.getPrototypeOf(Board)).call(this,scene,config));_this2.createPath(tiles);return _this2;}
_createClass(Board,[{key:'createPath',value:function createPath(tiles){var line,symbol,cost;for(var tileY=0,ycnt=tiles.length;tileY<ycnt;tileY++){line=tiles[tileY];for(var tileX=0,xcnt=line.length;tileX<xcnt;tileX++){symbol=line[tileX];if(symbol===' '){continue;}
cost=parseFloat(symbol);this.scene.rexBoard.add.shape(this,tileX,tileY,0,COLORMAP[cost]).setStrokeStyle(1,0xffffff,1).setData('cost',cost);}}
return this;}}]);return Board;}(RexPlugins.Board.Board);var ChessA=function(_RexPlugins$Board$Sha){_inherits(ChessA,_RexPlugins$Board$Sha);function ChessA(board,tileXY){_classCallCheck(this,ChessA);var scene=board.scene;if(tileXY===undefined){tileXY=board.getRandomEmptyTileXY(0);}
var _this3=_possibleConstructorReturn(this,(ChessA.__proto__||Object.getPrototypeOf(ChessA)).call(this,board,tileXY.x,tileXY.y,1,0x3f51b5));scene.add.existing(_this3);_this3.setScale(0.9);_this3.monopoly=scene.rexBoard.add.monopoly(_this3,{face:0,pathTileZ:0,costCallback:function costCallback(curTileXY,preTileXY,monopoly){var board=monopoly.board;return board.tileXYZToChess(curTileXY.x,curTileXY.y,0).getData('cost');}});_this3.moveTo=scene.rexBoard.add.moveTo(_this3);_this3.movingPathTiles=[];return _this3;}
_createClass(ChessA,[{key:'showMovingPath',value:function showMovingPath(tileXYArray){this.hideMovingPath();var tileXY,worldXY;var scene=this.scene,board=this.rexChess.board;for(var i=0,cnt=tileXYArray.length;i<cnt;i++){tileXY=tileXYArray[i];worldXY=board.tileXYToWorldXY(tileXY.x,tileXY.y,true);this.movingPathTiles.push(scene.add.circle(worldXY.x,worldXY.y,10,0xb0003a));}}},{key:'hideMovingPath',value:function hideMovingPath(){for(var i=0,cnt=this.movingPathTiles.length;i<cnt;i++){this.movingPathTiles[i].destroy();}
this.movingPathTiles.length=0;return this;}},{key:'moveForward',value:function moveForward(movingPoints){if(this.moveTo.isRunning){return this;}
var path=this.monopoly.getPath(movingPoints);this.showMovingPath(path);this.moveAlongPath(path);return this;}},{key:'moveAlongPath',value:function moveAlongPath(path){if(path.length===0){return;}
this.moveTo.once('complete',function(){this.moveAlongPath(path);},this);var tileData=path.shift();this.moveTo.moveTo(tileData);this.monopoly.setFace(this.moveTo.destinationDirection);return this;}}]);return ChessA;}(RexPlugins.Board.Shape);var getQuadGrid=function getQuadGrid(scene){var grid=scene.rexBoard.add.quadGrid({x:100,y:100,cellWidth:50,cellHeight:50,type:0});return grid;};var getHexagonGrid=function getHexagonGrid(scene){var staggeraxis='x';var staggerindex='odd';var grid=scene.rexBoard.add.hexagonGrid({x:100,y:100,size:30,staggeraxis:staggeraxis,staggerindex:staggerindex});return grid;};var createTileMap=function createTileMap(tilesMap,out){if(out===undefined){out=[];}
for(var i=0,cnt=tilesMap.length;i<cnt;i++){out.push(tilesMap[i].split(''));}
return out;};var config={type:Phaser.AUTO,parent:'phaser-example',width:800,height:600,scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},scene:Demo,plugins:{scene:[{key:'rexBoard',plugin:rexboardplugin,mapping:'rexBoard'}]}};var game=new Phaser.Game(config);},{}]},{},[1]);;